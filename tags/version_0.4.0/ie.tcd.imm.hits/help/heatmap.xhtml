<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml+xml; charset=UTF-8" />
<title>Plate Heatmap node description</title>
<link rel="stylesheet" type="text/css" href="PLUGINS_ROOT/ie.tcd.imm.hits.common/help/basic.css"/>
</head>
<body>
<h1><a name="overview">Plate Heatmap node overview</a></h1>
<p>The <a href="../html/nodes/Plate_Heatmap.html">node description</a> describes the overview of the functionality, while this page gives a more detailed explanation. You initial screen of Plate Heatmap view should look like this:</p>
<p>
<img src="heatmapInitial.png" usemap="#overviewmap"/>
<map name="overviewmap">
<area href="#upperPanel" title="Upper parameter panel" alt="Upper parameter panel" coords="0,0,622,85"/>
<area href="#plateArea" title="Plate area" alt="Plate area" coords="0,86,622,456"/>
<area href="#rightLegend" title="Right legend" alt="Right legend" coords="626,19,875,245"/>
<area href="#rightParameter" title="Right parameter area" alt="Right parameter area" coords="626,250,875,442"/>
<area href="#controlsTab" title="Controls" alt="Controls" coords="0,470,54,490"/>
<area href="#infoControlsTab" title="Info controls" alt="Info controls" coords="55,470,125,490"/>
<area href="#infoTab" title="Info" alt="Info" coords="126,470,157,490"/>
<area href="#settingsTab" title="Settings" alt="Settings" coords="158,470,207,490"/>
<area href="#legendTab" title="Legend" alt="Legend" coords="208,470,253,490"/>
<area href="#coloursTab" title="Colours" alt="Colours" coords="254,470,297,490"/>
<area href="#shapeSelection" title="Shape" alt="Shape" coords="174,553,318,608"/>
<area href="#formatSelection" title="Format" alt="Format" coords="194,494,298,548"/>
<area href="#controlLegend" title="Control legend" alt="Control legend" coords="450,505,702,705"/>
<area href="#visualControls" title="Visual controls" alt="Visual controls" coords="320,570,450,678"/>
<area href="#controlParemeter" title="Control parameter panel" alt="Control parameter panel" coords="174,560,318,705"/>
<area href="#controlsTab" title="Controls" alt="Controls" coords="0,490,875,705"/>
</map>
</p>
<h2>Layout</h2>
<p><a name="plateArea"/>As the picture above shows there is an area for the wells of the <abbr title="There are cases when more plates are shown.">selected plate</abbr>, the plate area.</p>
<p>The plate area is made up of wells. Each well has an optional background colour, and the content (a selection of <a href="#parameter">parameters</a>/<a href="#statistics">statistics</a>/<a href="#experiment">experiments</a>/<a href="#normalisation">normalisations</a>/<a href="#plate">plates</a>/<a href="#replicate">replicates</a>) of the well colour coded in a circular or rectangular format.</p>
<p><a name="upperPanel"/>There is a panel above the plate area, which initially contains only the <a href="#plate">plates</a> control. This area is  termed the <samp>upper</samp> position of the possible control positions.</p>
<p>The panel right of the plate area contains on top a <a name="rightLegend">well legend</a> and below that an <a name="rightParameter">area for the parameters</a>.</p>
<p>Below the plate area there are the different tabs for controls:</p>
<ul>
<li><a name="controlsTab"/><em>Controls</em> - this consist of 4 main parts:
	<ul>
		<li><a name="formatSelection" /><em>plate type</em>
		<ul>
			<li><em>96</em> well plate</li>
			<li><em>384</em> well plate</li>
		</ul>
		</li>
		<li><a name="shapeSelection" /><em>shape</em>
		<ul>
			<li><em>circle</em></li>
			<li><a href="#rectangular"><em>rectangle</em></a></li>
		</ul>
		</li>
		<li><a name="visualControls" />Some visual controls</li>
		<li><a name="controlParameter" />another area for parameters (<samp>primary</samp>,
		<samp>secondary</samp>, <samp>control</samp>)</li>
		<li><a name="controlLegend" />well legend</li>
	</ul>
	</li>
<li><a name="infoControlsTab"/><a href="#infoControlsArea"><em>Info controls</em></a> - allows you to influence content the tooltips and the textual description of the <a href="#visualWell">visual well</a>s. <a href="infoFormat">Details</a></li>
<li><a name="infoTab"/><a href="#infoArea"><em>Info</em></a> - Some information about the last clicked <a href="#visualWell">visual well</a>, and below that are the input rows.</li>
<li><a name="settingsTab"/><a href="#settingsArea"><em>Settings</em> - Currently not usable.</a></li>
<li><a name="legendTab"/><a href="#legendArea"><em>Legend</em></a> - A simple well legend.</li>
<li><a name="coloursTab"/><a href="#coloursArea"><em>Colours</em></a> - A place to set the colours for the parameter-statistics pairs.</li>
</ul>
<h2>Concepts</h2>
<h3><a name="visualWell">Visual well</a></h3>
<p>A well on the <a href="#plateArea">plate area</a> of the screen.</p>
<h3><a name="infoFormat">Info control text format.</a></h3>
<p>This is an HTML document with some templates included. You may include any row's content with the following syntax: <samp>${</samp>name of the (textual) column<samp>}</samp> (note: the column name is case sensitive).</p>
<p>There are special templates, which allow to include more data in a structured format:</p>
<ul>
<li><samp>${plate}</samp> - the actual <a href="concepts.xhtml#plate">plate</a> identifier (starting from <samp>1</samp>)</li>
<li><samp>${replicate}</samp> - the actual <a href="concepts.xhtml#replicate">replicate</a> identifier (starting from <samp>1</samp>)</li>
<li><samp>${well}</samp> - the well identifier in format like: <samp>A1</samp>.</li>
<li><samp>${score}</samp> - the <a href="settings.xhtml#score">scores</a> in table form.</li>
<li><samp>${raw}</samp> - the <a href="settings.xhtml#raw">raw</a> input values in table form.</li>
<li><samp>${median}</samp> - the <a href="settings.xhtml#median">median</a> of the raw replicate values in table form.</li>
<li><samp>${meanOrDiff}</samp> - the <a href="settings.xhtml#meanDiff">mean or difference</a> of the raw replicate values in table form.</li>
<li><samp>${normalised}</samp> - the <a href="settings.xhtml#normalised">normalised</a> replicate values in table form.</li>
<li><samp>${rawPerMedian}</samp> - the <a href="settings.xhtml#rawPer">raw values divided by the median of physical plate samples</a> in table form.</li>
<li><samp>${experimentName}</samp> - the name of the experiment.</li>
<li><samp>${normalisation}</samp> - the used normalisation description.</li>
<li><samp>${parameter}</samp> - the parameter selected.</li>
<li><samp>${metaStatType}</samp> - the statistics selected.</li>
</ul>
<p>The default format is:</p>
<pre>
&lt;html&gt;
Plate: &lt;b&gt;${plate}&lt;/b&gt; Well: &lt;b&gt;${well}&lt;/b&gt; Gene: ${Gene id} &lt;b&gt;${Gene symbol}&lt;/b&gt; Normalisation: ${Normalisation method} - ${Normalisation kind}&lt;table&gt;
${score}&lt;/table&gt;
&lt;table&gt;${normalised}&lt;/table&gt;
&lt;/html&gt;
</pre>
<h1><a name="configuration">Configuration</a></h1>
<p><img src="heatmapConfigure.png"/></p>
<p>Currently this option has no effect.</p>
<h1><a name="input">Input data</a></h1>
<p>The input data should be similar to the <a href="cellHTS2.xhtml#output1">first</a> or <a href="cellHTS2.xhtml#output2">second</a> output of <a href="cellHTS2.xhtml">cellHTS2 node</a>. It may contain more columns.</p>
<h3>Expected structure</h3>
<ul>
<li><a href="settings.xhtml#experiment">Experiment</a></li>
<li><a href="settings.xhtml#normMethod">Normalisation method</a></li>
<li><a href="settings.xhtml#log">log transform</a></li>
<li><a href="settings.xhtml#normKind">Normalisation kind</a></li>
<li><a href="settings.xhtml#varAdjust">Variance adjustment</a></li>
<li><a href="settings.xhtml#scoreMethod">Scoring method</a></li>
<li><a href="settings.xhtml#sumMethod">Summarise method</a></li>
<li><a href="settings.xhtml#plate">Plate</a></li>
</ul>
<p>All other columns are optional, but at least one data column is expected.</p>
<h1><a name="description">Details</a></h1>
<h2>General</h2>
<p>Naturally you can select one or more elements from the list/buttons/slider controls. Holding the <em>Ctrl</em> key you can select (or deselect) other options if the model allows you.</p>
<h3><a name="rectangular">Rectangular well view</a></h3>
<p>You can switch to rectangular well view from the circular any time. (And also back to circular.)</p>
<p><img src="heatmapRectangles.png"/></p>
<h2>Tabs</h2>
<h3><a name="infoControlsArea">Info controls</a></h3>
<p>This you to change the data shown in tooltips and in the <a href="infoArea">Info</a> tab. Details of the format is <a href="#infoFormat">here</a></p>
<p>You must click on <em>update</em> button to update the texts.</p>
<p><img src="heatmapInfoControl.png"/></p>
<h3><a name="infoArea">Info</a></h3>
<p>This area shows the information about the last clicked well, and also shows the rows (maybe filtered by the HiLites).</p>
<p><img src="heatmapInfo.png"/></p>
<h3><a name="settingsArea">Settings</a></h3>
<p>Currently nothing is adjustable on this tab. The idea is to save the actual layout of your view, and later reload it. Currently not implemented.</p>
<h3><a name="legendArea">Legend</a></h3>
<p>Shows a legend of the wells similarly to the other legend views on the <a href="#rightLegend">sidebar</a> and on <a href="#controlsTab">controls tab</a>. The tooltips tells you what is the primary and secondary value at that position, or on colour legends the actual values with the proper colours.</p>
<h3><a name="coloursArea">Colours</a></h3>
<p>The controls on this tab allows to set the bounds and colours of the continuous (two colours) and discrete (one colour) colouring.</p>
<p><img src="heatmapColours.png"/></p>
<p>For details see the page about the <a href="visualise.xhtml#colourSettings">colour settings</a> in general.</p>
<p>For example the image above shows that the <em>Cell Count</em> scores are going from <samp>-2</samp> (yellow) to <samp>0</samp> (black) without any other intermediate colour. (The colour of values outside of the bounds is the same as the colour of the nearest bound.) Also, the colours for the score of <em>Cell Elongation</em> are flipped: the lower bound has red colour, while the upper bound has green.</p>
<h2>Special controls</h2>
<p>It is possible to move or change the appearance of the controls. Also, you can influence which parameters you want to see.<br />
There are some special concepts related to these nodes:</p>
<ul>
<li><code><a name="primary">primary</a></code> - These are the horizontal splits in the rectangular form, while with circles these are creating splices.</li>
<li><code><a name="secondary">secondary</a></code> - These are the vertical splits in the rectangular form, while with circles these are splitting rectangularly.</li>
<li><a name="other">other</a> - These are not splitting nor the rectangles, nor the circles, but there are controls to change their values. You may not move a primary or secondary control to these forms directly, but if you select an other control you can change it to primary or a secondary. In that case the will be swapped.</li>
</ul>
<h3><a name="changeAppearance">Change appearance</a></h3>
<p>Example: You want to change the appearance of the plate parameter slider to buttons. For this you right click near the slider, and select from the context menu the <em>Change appearance</em>/<em>toButtons</em> option.</p>
<p><img src="heatmapChangeAppearanceBefore.png"/></p>
<p>After the change you will see something like this:</p>
<p><img src="heatmapChangeAppearanceAfter.png"/></p>
<h3><a name="moveTo">Move to</a></h3>
<p>There are some areas where you can put the controls:</p>
<ul>
<li><code>upper</code> - This is only for the <a href="#other">other</a> (non-<a href="#primary">primary</a>, non-<a href="#secondary">secondary</a>) controls. This is above the heatmaps.</li>
<li><code>sidebarOther</code> - This is for the default area for <a href="#other">other</a> (non-<a href="#primary">primary</a>, non-<a href="#secondary">secondary</a>) controls. It is located on the right of the heatmap.</li>
<li><code>control</code> - This is located below the heatmap. (With this name it is only for <a href="#other">other</a> (non-<a href="#primary">primary</a>, non-<a href="#secondary">secondary</a>) controls.)</li>
<li><code>primary</code> - This is located below the heatmap. (With this name it is only for <a href="#primary">primary</a> controls.)</li>
<li><code>sidebarPrimary</code> - This is located on the right of the heatmap, default location. (With this name it is only for <a href="#primary">primary</a> controls.)</li>
<li><code>secondary</code> - This is located below the heatmap. (With this name it is only for <a href="#secondary">secondary</a> controls.)</li>
<li><code>sidebarSecondary</code> - This is located on the right of the heatmap, default location. (With this name it is only for <a href="#secondary">secondary</a> controls.)</li>
</ul>
<p>Example: You want to move the statistics parameter combobox to the <a href="#upperPanel">upper</a> panel. For this you right click near the combobox, and select from the context menu the <em>Move to</em>/<em>upper</em> option.</p>
<p>Note: The result area's background becomes black.</p>
<p><img src="heatmapMovetoBefore.png"/></p>
<p>After the change you will see something like this:</p>
<p><img src="heatmapMovetoAfter.png"/></p>
<h3><a name="changeType">Change type</a></h3>
<p>Example: You want to change the axes of the rectangles, you want to see the replicates on the x axis, while the parameters on the y axis. For this you should right click near the buttons of replicates, and select from the context menu the <em>Change type</em>/<em>to primary</em> option. (Or equivalently: from Parameters list select the <em>Change type</em>/<em>to secondary</em>.)</p>
<p><img src="heatmapChangeTypeBefore.png"/></p>
<p>After the change you will see something like this:</p>
<p><img src="heatmapChangeTypeAfter.png"/></p>
<h1>Menu</h1>
<h3><a name="exportAll">Export all</a></h3>
<p><img src="heatmapExportAll.png"/></p>
<p>With this option you are able to export all combination of heatmaps (fixing the <a href="#primary">primary</a> and <a href="secondary">secondary</a> control values are fixed) to png files. The file name will contain the varying parameter name followed by <code>-</code> and the parameter's value.</p>
<p>In the export dialog you can set the size of the images, the result folder. You can also uncheck to ask for overwrites.</p>
<h2><a name="hiLite">HiLite</a></h2>
<p>For general overview check the <a href="PLUGINS_ROOT/org.knime.workbench.help/html/quickstartguide.html#HiLite">KNIME help</a>.</p>
<h3>HiLite selected</h3>
<p>HiLites the (rows belonging to) <a href="visualWell">visual wells</a> which are selected. (Note: there may be selected wells not visible (ex. being on other, non-visible plate).)</p>
<h3>UnHiLite selected</h3>
<p>Removes HiLite from the (rows belonging to) <a href="visualWell">visual wells</a> which are selected. (Note: there may be selected wells not visible (ex. being on other, non-visible plate).)</p>
<h3>Clear HiLite</h3>
<p>Removes all HiLite from the input data.</p>
<h2>Legend</h2>
<h3>Show colours legend</h3>
<p>To display or hide  colour scales on well legends.</p>
<h1>Limitations</h1>
<p>See <a href="features.xhtml">Features</a>.</p>
<include path="PLUGINS_ROOT/ie.tcd.imm.hits.common/help/footer.xhtml/copyright"/>
</body>
</html>